BEGIN;
  SELECT plan(15);

  SELECT has_schema('pgtap', 'Schema pgtap should exist.');

  SELECT has_role('dbo', 'Role dbo should exist.');

  SELECT schema_owner_is('pgtap', 'dbo', 'Schema pgtap should have the correct owner.');

  SELECT tables_are('pgtap', ARRAY[]::TEXT[], 'Schema pgtap should have the correct tables.');

  SELECT foreign_tables_are('pgtap', ARRAY[]::TEXT[], 'Schema pgtap should have the correct foreign tables.');

  SELECT views_are('pgtap', ARRAY['tap_funky', 'pg_all_foreign_keys']::TEXT[], 'Schema pgtap should have the correct views.');

  SELECT materialized_views_are('pgtap', ARRAY[]::TEXT[], 'Schema pgtap should have the correct materialized views.');

  SELECT sequences_are('pgtap', ARRAY[]::TEXT[], 'Schema pgtap should have the correct sequences.');

  SELECT functions_are('pgtap', ARRAY['pg_version', 'pg_version_num', 'os_name', 'pgtap_version', 'isnt', 'plan', 'no_plan', '_get', 'fail', '_get_latest', 'has_view', '_get_latest', '_get_note', '_get_note', 'todo', 'hasnt_view', 'todo', '_set', '_set', '_set', '_add', '_add', 'add_result', 'num_failed', '_alike', 'matches', 'matches', 'imatches', 'imatches', 'alike', 'alike', 'ialike', 'ialike', '_unalike', 'doesnt_match', 'runtests', 'doesnt_match', 'doesnt_imatch', 'set_ne', 'doesnt_imatch', 'unalike', 'unalike', 'unialike', 'unialike', 'todo', 'todo', 'todo_start', 'todo_start', 'in_todo', 'has_view', 'todo_end', 'has_view', 'has_view', 'performs_ok', 'performs_ok', 'hasnt_table', 'cmp_ok', 'cmp_ok', 'pass', 'pass', 'fail', '_finish', 'finish', 'diag', 'diag', 'diag', 'diag', 'ok', 'ok', 'is', 'is', 'isnt', '_todo', 'skip', 'skip', 'skip', 'skip', '_query', 'throws_ok', 'throws_ok', 'throws_ok', 'throws_ok', 'throws_ok', 'throws_ok', 'throws_ok', '_error_diag', 'lives_ok', 'lives_ok', 'hasnt_table', '_time_trials', 'performs_within', 'performs_within', 'performs_within', 'performs_within', '_relexists', '_relexists', 'has_relation', 'has_relation', 'has_relation', 'hasnt_relation', 'hasnt_relation', 'hasnt_relation', '_rexists', '_rexists', '_rexists', '_rexists', 'has_table', 'has_table', 'has_table', 'has_table', 'hasnt_table', 'hasnt_table', 'hasnt_view', 'hasnt_view', 'hasnt_view', 'has_sequence', 'has_sequence', 'has_sequence', 'has_sequence', 'hasnt_sequence', 'hasnt_sequence', 'hasnt_sequence', 'has_foreign_table', 'has_foreign_table', 'has_foreign_table', 'has_foreign_table', 'hasnt_foreign_table', 'hasnt_foreign_table', 'hasnt_foreign_table', 'hasnt_foreign_table', 'has_composite', 'has_composite', 'has_composite', 'hasnt_composite', 'hasnt_composite', 'hasnt_composite', '_cexists', '_cexists', 'has_column', 'has_column', 'has_column', 'hasnt_column', 'hasnt_column', 'hasnt_column', '_col_is_null', '_col_is_null', 'col_not_null', 'col_not_null', 'col_is_null', 'col_is_null', '_get_col_type', '_get_col_type', '_get_col_ns_type', '_typename', 'col_hasnt_default', 'col_hasnt_default', '_pg_sv_column_array', 'format_type_string', 'col_type_is', 'col_type_is', 'col_type_is', 'col_type_is', 'col_type_is', 'col_type_is', '_has_def', '_has_def', 'col_has_default', 'col_has_default', 'col_has_default', 'col_hasnt_default', 'hasnt_index', '_def_is', '_cdi', '_cdi', '_cdi', 'col_default_is', 'col_default_is', 'col_default_is', 'col_default_is', 'col_default_is', 'col_default_is', '_hasc', '_hasc', 'has_pk', 'has_pk', 'has_pk', 'has_pk', 'hasnt_pk', 'hasnt_pk', 'hasnt_pk', '_ident_array_to_string', '_pg_sv_table_accessible', '_keys', '_keys', '_ckeys', '_ckeys', 'col_is_pk', 'col_is_pk', 'col_is_pk', 'col_is_pk', 'col_is_pk', 'col_is_pk', 'col_is_pk', 'col_is_pk', 'col_isnt_pk', 'col_isnt_pk', 'col_isnt_pk', 'col_isnt_pk', 'col_isnt_pk', 'col_isnt_pk', 'has_fk', 'has_fk', 'has_fk', 'hasnt_fk', 'hasnt_fk', 'hasnt_fk', '_fkexists', 'set_ne', '_fkexists', 'col_is_fk', 'col_is_fk', 'col_is_fk', 'col_is_fk', 'col_is_fk', 'col_is_fk', 'col_isnt_fk', 'col_isnt_fk', 'col_isnt_fk', 'col_isnt_fk', 'col_isnt_fk', 'col_isnt_fk', 'has_unique', 'has_unique', 'has_unique', '_constraint', '_constraint', 'col_is_unique', 'col_is_unique', 'col_is_unique', 'col_is_unique', 'col_is_unique', 'col_is_unique', 'col_is_unique', 'col_is_unique', 'has_check', 'has_check', 'has_check', 'col_has_check', 'col_has_check', 'col_has_check', 'col_has_check', 'col_has_check', 'col_has_check', 'fk_ok', 'fk_ok', 'fk_ok', 'fk_ok', 'fk_ok', 'fk_ok', 'fk_ok', 'fk_ok', 'hasnt_index', '_prokind', '_funkargs', '_got_func', '_got_func', '_got_func', '_got_func', 'has_function', 'has_function', 'has_function', 'has_function', 'has_function', 'has_function', 'has_function', 'has_function', 'hasnt_function', 'hasnt_function', 'hasnt_function', 'hasnt_function', 'hasnt_function', 'hasnt_function', 'hasnt_function', 'hasnt_function', '_pg_sv_type_array', 'can', 'can', 'bag_ne', 'can', 'can', '_ikeys', '_ikeys', '_have_index', '_have_index', 'has_index', 'has_index', 'has_index', 'has_index', 'has_index', 'has_index', '_is_schema', 'has_index', 'has_index', 'has_index', 'has_index', 'hasnt_index', 'hasnt_index', '_is_indexed', 'is_indexed', 'is_indexed', 'is_indexed', 'is_indexed', 'is_indexed', 'is_indexed', 'is_indexed', 'index_is_unique', 'index_is_unique', 'index_is_unique', 'index_is_unique', 'index_is_primary', 'index_is_primary', 'index_is_primary', 'index_is_primary', 'hasnt_type', 'is_clustered', 'is_clustered', 'is_clustered', 'is_clustered', 'index_is_type', 'index_is_type', 'index_is_type', 'index_is_type', '_trig', '_trig', 'has_trigger', 'has_trigger', 'has_trigger', 'has_trigger', 'hasnt_trigger', 'hasnt_trigger', 'hasnt_trigger', 'hasnt_trigger', 'has_domain', 'has_domain', 'trigger_is', 'trigger_is', 'trigger_is', 'trigger_is', 'has_schema', 'has_schema', 'hasnt_schema', 'hasnt_schema', 'has_tablespace', 'has_tablespace', 'has_tablespace', 'hasnt_tablespace', 'hasnt_tablespace', '_has_type', '_has_type', 'has_type', 'has_type', 'has_type', 'has_type', 'hasnt_type', 'hasnt_type', 'hasnt_type', 'has_domain', 'has_domain', 'hasnt_domain', 'hasnt_domain', 'hasnt_domain', 'hasnt_domain', 'has_enum', 'has_enum', 'has_enum', 'has_enum', 'hasnt_enum', 'hasnt_enum', 'hasnt_enum', 'hasnt_enum', 'enum_has_labels', 'enum_has_labels', 'enum_has_labels', 'enum_has_labels', '_has_role', 'has_role', 'has_role', 'hasnt_role', 'hasnt_role', '_has_user', 'has_user', 'has_user', 'hasnt_user', 'has_opclass', 'hasnt_user', '_is_super', 'is_superuser', 'is_superuser', 'isnt_superuser', 'isnt_superuser', '_has_group', 'has_group', 'has_group', 'hasnt_group', 'hasnt_group', '_grolist', 'is_member_of', 'is_member_of', 'is_member_of', 'is_member_of', 'isnt_member_of', 'isnt_member_of', 'isnt_member_of', 'isnt_member_of', '_cmp_types', '_cast_exists', '_cast_exists', '_cast_exists', 'has_cast', 'has_cast', 'has_cast', 'has_cast', 'has_cast', 'has_cast', 'hasnt_cast', 'hasnt_cast', 'hasnt_cast', 'hasnt_cast', 'hasnt_cast', 'hasnt_cast', '_expand_context', '_get_context', 'cast_context_is', 'cast_context_is', '_op_exists', '_op_exists', '_op_exists', 'has_operator', 'isnt_empty', 'has_operator', 'has_operator', 'has_operator', 'has_operator', 'has_operator', 'hasnt_operator', 'hasnt_operator', 'hasnt_operator', 'hasnt_operator', 'hasnt_operator', 'hasnt_operator', 'has_leftop', 'has_leftop', 'has_leftop', 'has_leftop', 'has_leftop', 'has_leftop', 'hasnt_leftop', 'hasnt_leftop', 'hasnt_leftop', 'hasnt_leftop', 'hasnt_leftop', 'hasnt_leftop', 'has_rightop', 'has_rightop', 'has_rightop', 'has_rightop', 'has_rightop', 'has_rightop', 'hasnt_rightop', 'hasnt_rightop', 'hasnt_rightop', 'hasnt_rightop', 'hasnt_rightop', 'hasnt_rightop', '_are', 'tablespaces_are', 'tablespaces_are', 'schemas_are', 'schemas_are', '_extras', '_extras', '_extras', '_extras', '_missing', 'function_returns', '_missing', '_missing', '_missing', 'tables_are', 'tables_are', 'tables_are', 'tables_are', 'views_are', 'views_are', 'views_are', 'views_are', 'sequences_are', 'sequences_are', 'sequences_are', 'sequences_are', 'functions_are', 'functions_are', 'functions_are', 'functions_are', 'indexes_are', 'indexes_are', 'indexes_are', 'indexes_are', 'users_are', 'users_are', 'groups_are', 'groups_are', 'languages_are', 'languages_are', '_is_trusted', 'has_language', 'has_language', 'hasnt_language', 'hasnt_language', 'language_is_trusted', 'language_is_trusted', '_opc_exists', '_opc_exists', 'has_opclass', 'has_opclass', 'has_opclass', 'hasnt_opclass', 'hasnt_opclass', 'hasnt_opclass', 'hasnt_opclass', 'opclasses_are', 'opclasses_are', 'opclasses_are', 'opclasses_are', 'rules_are', 'rules_are', 'rules_are', 'rules_are', '_is_instead', '_is_instead', 'has_rule', 'has_rule', 'has_rule', 'has_rule', 'hasnt_rule', 'hasnt_rule', 'hasnt_rule', 'hasnt_rule', 'rule_is_instead', 'rule_is_instead', 'rule_is_instead', 'rule_is_instead', '_expand_on', '_contract_on', '_rule_on', '_rule_on', 'rule_is_on', 'rule_is_on', 'rule_is_on', 'rule_is_on', '_nosuch', '_func_compare', '_func_compare', '_func_compare', '_func_compare', '_lang', '_lang', '_lang', '_lang', 'function_lang_is', 'function_lang_is', 'function_lang_is', 'function_lang_is', 'function_lang_is', 'function_lang_is', 'function_lang_is', 'function_lang_is', '_returns', '_returns', '_returns', '_returns', '_retval', 'function_returns', 'function_returns', 'function_returns', 'function_returns', 'function_returns', 'function_returns', 'function_returns', '_definer', '_definer', '_definer', '_definer', 'is_definer', 'is_definer', 'is_definer', 'is_definer', 'is_definer', 'is_definer', 'is_definer', 'is_definer', 'isnt_definer', 'isnt_definer', 'isnt_definer', 'isnt_definer', 'isnt_definer', 'isnt_definer', 'isnt_definer', 'isnt_definer', '_type_func', '_type_func', '_type_func', '_type_func', 'is_aggregate', 'is_aggregate', 'is_aggregate', 'is_aggregate', 'is_aggregate', 'is_aggregate', 'is_aggregate', 'is_aggregate', 'isnt_aggregate', 'isnt_aggregate', 'isnt_aggregate', 'isnt_aggregate', 'isnt_aggregate', 'isnt_aggregate', 'isnt_aggregate', 'isnt_aggregate', '_strict', '_strict', '_strict', '_strict', 'is_strict', 'is_strict', 'is_strict', 'is_strict', 'is_strict', 'is_strict', 'is_strict', 'is_strict', 'isnt_strict', 'isnt_strict', 'isnt_strict', 'isnt_strict', 'isnt_strict', 'isnt_strict', 'isnt_strict', 'isnt_strict', '_expand_vol', '_refine_vol', '_vol', '_vol', '_vol', '_vol', 'volatility_is', 'volatility_is', 'volatility_is', 'volatility_is', 'volatility_is', 'volatility_is', 'volatility_is', 'volatility_is', 'check_test', 'check_test', 'check_test', 'check_test', 'check_test', 'findfuncs', 'findfuncs', 'findfuncs', 'findfuncs', '_runem', '_is_verbose', 'do_tap', 'do_tap', 'do_tap', 'do_tap', '_currtest', '_cleanup', 'diag_test_name', '_runner', 'runtests', 'runtests', 'runtests', '_temptable', '_temptable', '_temptypes', '_docomp', '_relcomp', '_relcomp', 'set_eq', 'set_eq', 'set_eq', 'set_eq', 'bag_eq', 'bag_eq', 'bag_eq', 'bag_eq', '_do_ne', '_relne', '_relne', 'set_ne', 'set_ne', 'bag_ne', 'bag_ne', 'bag_ne', '_relcomp', 'set_has', 'set_has', 'bag_has', 'bag_has', 'set_hasnt', 'set_hasnt', 'bag_hasnt', 'bag_hasnt', 'results_eq', 'results_eq', 'results_eq', 'results_eq', 'results_eq', 'results_eq', 'results_eq', 'results_eq', 'results_eq', 'results_eq', 'results_eq', 'results_eq', 'results_ne', 'results_ne', 'results_ne', 'results_ne', 'results_ne', 'results_ne', 'results_ne', 'results_ne', 'results_ne', 'results_ne', 'results_ne', 'results_ne', 'isa_ok', 'isa_ok', 'is_empty', 'is_empty', 'isnt_empty', 'collect_tap', 'collect_tap', '_tlike', 'throws_like', 'throws_like', 'throws_ilike', 'throws_ilike', 'throws_matching', 'throws_matching', 'throws_imatching', 'throws_imatching', 'roles_are', 'roles_are', '_types_are', 'types_are', 'types_are', 'domain_type_is', 'domain_type_is', 'domain_type_is', 'casts_are', 'display_oper', '_types_are', 'types_are', 'types_are', 'domains_are', 'domains_are', 'domains_are', 'domains_are', 'enums_are', 'enums_are', 'enums_are', 'enums_are', '_dexists', '_dexists', '_get_dtype', '_get_dtype', 'domain_type_is', 'domain_type_is', 'domain_type_is', 'domain_type_isnt', 'domain_type_isnt', 'domain_type_isnt', 'domain_type_isnt', 'domain_type_isnt', 'domain_type_isnt', 'row_eq', 'row_eq', 'triggers_are', 'triggers_are', 'triggers_are', 'triggers_are', '_areni', 'casts_are', 'operators_are', 'operators_are', 'operators_are', 'operators_are', 'columns_are', 'columns_are', 'columns_are', 'columns_are', '_get_db_owner', 'db_owner_is', 'db_owner_is', '_get_schema_owner', 'schema_owner_is', 'schema_owner_is', '_get_rel_owner', '_get_rel_owner', 'relation_owner_is', 'relation_owner_is', 'relation_owner_is', 'relation_owner_is', '_get_rel_owner', '_get_rel_owner', '_get_rel_owner', '_get_rel_owner', 'table_owner_is', 'table_owner_is', 'table_owner_is', 'table_owner_is', 'view_owner_is', 'view_owner_is', 'view_owner_is', 'view_owner_is', 'sequence_owner_is', 'sequence_owner_is', 'sequence_owner_is', 'sequence_owner_is', 'composite_owner_is', 'composite_owner_is', 'composite_owner_is', 'composite_owner_is', 'foreign_table_owner_is', 'foreign_table_owner_is', 'foreign_table_owner_is', 'foreign_table_owner_is', '_get_func_owner', '_get_func_owner', 'function_owner_is', 'function_owner_is', 'function_owner_is', 'function_owner_is', '_get_tablespace_owner', 'tablespace_owner_is', 'tablespace_owner_is', '_get_index_owner', '_get_index_owner', 'index_owner_is', 'index_owner_is', 'index_owner_is', 'index_owner_is', '_get_language_owner', 'language_owner_is', 'language_owner_is', '_get_opclass_owner', '_get_opclass_owner', 'opclass_owner_is', 'opclass_owner_is', 'opclass_owner_is', 'opclass_owner_is', '_get_type_owner', '_get_type_owner', 'type_owner_is', 'type_owner_is', 'type_owner_is', 'type_owner_is', '_assets_are', '_get_table_privs', '_table_privs', 'table_privs_are', 'table_privs_are', 'table_privs_are', 'table_privs_are', '_db_privs', '_get_db_privs', 'database_privs_are', 'database_privs_are', 'hasnt_extension', '_get_func_privs', '_fprivs_are', 'function_privs_are', 'function_privs_are', 'function_privs_are', 'function_privs_are', '_get_lang_privs', 'language_privs_are', 'language_privs_are', '_get_schema_privs', 'schema_privs_are', 'schema_privs_are', '_get_tablespaceprivs', 'tablespace_privs_are', 'tablespace_privs_are', '_get_sequence_privs', 'sequence_privs_are', 'sequence_privs_are', 'sequence_privs_are', 'sequence_privs_are', '_get_ac_privs', 'any_column_privs_are', 'any_column_privs_are', 'any_column_privs_are', 'any_column_privs_are', '_get_col_privs', 'materialized_view_owner_is', 'is_partitioned', 'column_privs_are', 'column_privs_are', 'column_privs_are', 'column_privs_are', '_get_fdw_privs', 'fdw_privs_are', 'fdw_privs_are', '_get_server_privs', 'server_privs_are', 'server_privs_are', 'materialized_views_are', 'materialized_views_are', 'materialized_views_are', 'materialized_views_are', 'materialized_view_owner_is', 'materialized_view_owner_is', 'materialized_view_owner_is', 'has_materialized_view', 'has_materialized_view', 'has_materialized_view', 'hasnt_materialized_view', 'hasnt_materialized_view', 'hasnt_materialized_view', 'foreign_tables_are', 'foreign_tables_are', 'foreign_tables_are', 'foreign_tables_are', '_extensions', '_extensions', 'extensions_are', 'extensions_are', 'extensions_are', 'extensions_are', '_ext_exists', '_ext_exists', 'has_extension', 'has_extension', 'has_extension', 'has_extension', 'hasnt_extension', 'hasnt_extension', 'hasnt_extension', 'is_partitioned', 'is_partitioned', 'is_partitioned', 'isnt_partitioned', 'isnt_partitioned', 'isnt_partitioned', 'isnt_partitioned', '_partof', '_partof', 'is_partition_of', 'is_partition_of', 'is_partition_of', 'is_partition_of', '_parts', '_parts', 'partitions_are', 'partitions_are', 'partitions_are', 'partitions_are', '_ident_array_to_sorted_string', '_array_to_sorted_string', 'is_ancestor_of', 'policies_are', 'policies_are', 'policies_are', 'policies_are', 'policy_roles_are', 'policy_roles_are', 'policy_roles_are', 'policy_roles_are', 'policy_cmd_is', 'policy_cmd_is', 'is_ancestor_of', 'is_ancestor_of', 'policy_cmd_is', 'policy_cmd_is', '_inherited', '_inherited', 'has_inherited_tables', 'has_inherited_tables', 'has_inherited_tables', 'has_inherited_tables', 'hasnt_inherited_tables', 'hasnt_inherited_tables', 'hasnt_inherited_tables', 'hasnt_inherited_tables', '_ancestor_of', '_ancestor_of', 'is_ancestor_of', 'is_ancestor_of', 'is_ancestor_of', 'is_ancestor_of', 'is_ancestor_of', 'isnt_ancestor_of', 'isnt_ancestor_of', 'isnt_ancestor_of', 'isnt_ancestor_of', 'isnt_ancestor_of', 'isnt_ancestor_of', 'isnt_ancestor_of', 'isnt_ancestor_of', 'is_descendent_of', 'is_descendent_of', 'is_descendent_of', 'is_descendent_of', 'is_descendent_of', 'is_descendent_of', 'is_descendent_of', 'is_descendent_of', 'isnt_descendent_of', 'isnt_descendent_of', 'isnt_descendent_of', 'isnt_descendent_of', 'isnt_descendent_of', 'isnt_descendent_of', 'isnt_descendent_of', 'isnt_descendent_of', 'is_normal_function', 'is_normal_function', 'is_normal_function', 'is_normal_function', 'is_normal_function', 'is_normal_function', 'is_normal_function', 'is_normal_function', 'isnt_normal_function', 'isnt_normal_function', 'isnt_normal_function', 'isnt_normal_function', 'isnt_normal_function', 'isnt_normal_function', 'isnt_normal_function', 'isnt_normal_function', 'is_window', 'is_window', 'is_window', 'is_window', 'is_window', 'is_window', 'is_window', 'is_window', 'isnt_window', 'isnt_window', 'isnt_window', 'isnt_window', 'isnt_window', 'isnt_window', 'isnt_window', 'isnt_window', 'is_procedure', 'is_procedure', 'is_procedure', 'is_procedure', 'is_procedure', 'is_procedure', 'is_procedure', 'is_procedure', 'isnt_procedure', 'isnt_procedure', 'isnt_procedure', 'isnt_procedure', 'isnt_procedure', 'isnt_procedure', 'isnt_procedure', 'isnt_procedure']::TEXT[], 'Schema pgtap should have the correct functions.');

  SELECT opclasses_are('pgtap', ARRAY[]::TEXT[], 'Schema pgtap should have the correct opclasses.');

  SELECT types_are('pgtap', ARRAY['_time_trial_type']::TEXT[], 'Schema pgtap should have the correct types.');

  SELECT domains_are('pgtap', ARRAY[]::TEXT[], 'Schema pgtap should have the correct domains.');

  SELECT enums_are('pgtap', ARRAY[]::TEXT[], 'Schema pgtap should have the correct enums.');

  SELECT operators_are('pgtap', ARRAY[]::TEXT[], 'Schema pgtap should have the correct operators.');

  SELECT extensions_are('pgtap', ARRAY['pgtap']::TEXT[], 'Cluster should have the correct extensions');

  SELECT * FROM finish();
ROLLBACK;
